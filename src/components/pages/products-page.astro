---
import BaseLayout from "~/layouts/base-layout.astro";
import { Icon } from "astro-icon/components";
import { getLangFromUrl, useTranslations } from "~/i18n/utils";
import { generateWebPageSchema } from "~/utils/structured-data";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const currentUrl = new URL(Astro.url.pathname, Astro.site);
const webPageSchema = generateWebPageSchema(
  t("products.title"),
  t("products.description"),
  currentUrl.toString(),
  lang
);

const cards = [
  {
    id: "monitorBacklight",
    imageSrc: "/images/Monitor backlight.webp",
    iconName: "mdi:monitor",
    imageAlt: "AARGB Monitor Backlight - LED strip ambient lighting behind display",
  },
  {
    id: "deskLamp",
    imageSrc: "/images/Desk ambient lamp.webp",
    iconName: "mdi:desk-lamp",
    imageAlt: "AARGB Desk Ambient Lamp - Compact RGB lighting for desktop",
  },
  {
    id: "floorLamp",
    imageSrc: "/images/Floor lamp.webp",
    iconName: "mdi:floor-lamp",
    imageAlt: "AARGB Floor Lamp - Standing RGB lamp for room ambient lighting",
  },
  {
    id: "peripherals",
    imageSrc: "/images/Peripherals.webp",
    iconName: "mdi:keyboard",
    imageAlt: "AARGB Peripherals - RGB keyboard, mouse, and mousepad",
  },
  {
    id: "pcCase",
    imageSrc: "/images/PC case ARGB devices.webp",
    iconName: "mdi:fan",
    imageAlt: "AARGB PC Case Devices - RGB fans and LED strips for computer case",
  },
] as const;
---

<BaseLayout
  title={t("products.title")}
  description={t("products.description")}
  lang={lang}
  structuredData={webPageSchema}
>
  <section class="hero-shell">
    <div class="hero-glow" aria-hidden="true"></div>

    <header class="space-y-6 text-center">
      <h1 class="sr-only">{t("products.heading")}</h1>
      <p class="gradient-text text-5xl font-extrabold tracking-tight sm:text-6xl" aria-hidden="true">
        {t("products.heading")}
      </p>
      <p class="mx-auto max-w-3xl text-base text-offset sm:text-lg">
        {t("products.lead")}
      </p>
    </header>

    <section class="mt-12 space-y-6">
      <h2 class="text-xl font-semibold tracking-tight sm:text-2xl">
        {t("products.deviceTypes.title")}
      </h2>
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {cards.map(({ id, iconName, imageSrc, imageAlt }) => (
          <article class="glass-card group flex flex-col gap-4">
            <div class="overflow-hidden rounded-2xl border border-default">
              {imageSrc ? (
                <img
                  src={encodeURI(imageSrc)}
                  alt={imageAlt}
                  loading="lazy"
                  decoding="async"
                  class="h-44 w-full object-cover transition-transform duration-300 motion-reduce:transition-none group-hover:scale-[1.03] sm:h-48"
                />
              ) : (
                <div
                  class="flex h-44 w-full items-center justify-center bg-gradient-to-br from-indigo-500 via-fuchsia-500 to-pink-500 transition-transform duration-300 motion-reduce:transition-none group-hover:scale-[1.03] sm:h-48"
                  aria-hidden="true"
                >
                  <Icon name={iconName} class="size-10 text-white" />
                </div>
              )}
            </div>

            <div class="space-y-1">
              <p class="text-lg font-semibold">
                {t(`products.cards.${id}.title` as any)}
              </p>
              <p class="text-sm text-offset">
                {t(`products.cards.${id}.desc` as any)}
              </p>
            </div>
          </article>
        ))}
      </div>

      <p class="mx-auto max-w-3xl text-center text-sm text-offset">
        {t("products.note")}
      </p>
    </section>
  </section>
</BaseLayout>


