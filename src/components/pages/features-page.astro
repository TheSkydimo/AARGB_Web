---
import BaseLayout from "~/layouts/base-layout.astro";
import FeatureStory from "~/components/feature-story.astro";
import { getLangFromUrl, useTranslations } from "~/i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const highlights = [
  {
    title: t("common.highlights.easy.title"),
    desc: t("common.highlights.easy.desc"),
    imageSrc: "/images/1.webp",
  },
  {
    title: t("common.highlights.devices.title"),
    desc: t("common.highlights.devices.desc"),
    imageSrc: "/images/2.webp",
  },
  {
    title: t("common.highlights.lowResource.title"),
    desc: t("common.highlights.lowResource.desc"),
    imageSrc: "/images/3.webp",
  },
];

const stories = [
  {
    title: t("features.software.title"),
    desc: t("features.software.desc"),
    items: [t("features.software.b1"), t("features.software.b2"), t("features.software.b3")],
    imageSrc: "/images/about.webp",
  },
  {
    title: t("features.multidevice.title"),
    desc: t("features.multidevice.desc"),
    items: [
      t("features.multidevice.i1"),
      t("features.multidevice.i2"),
      t("features.multidevice.i3"),
      t("features.multidevice.i4"),
    ],
    imageSrc: "/images/1.webp",
  },
  {
    title: t("features.modes.title"),
    desc: t("features.modes.desc"),
    items: [
      t("features.modes.i1"),
      t("features.modes.i2"),
      t("features.modes.i3"),
      t("features.modes.i4"),
    ],
    imageSrc: "/images/2.webp",
  },
  {
    title: t("features.performance.title"),
    desc: t("features.performance.desc"),
    items: [
      t("features.performance.b1"),
      t("features.performance.b2"),
      t("features.performance.b3"),
    ],
    imageSrc: "/images/3.webp",
  },
];
---

<BaseLayout
  title={t("features.title")}
  description={t("features.description")}
  lang={lang}
>
  <section class="hero-shell">
    <div class="hero-glow" aria-hidden="true"></div>

    <header class="space-y-6 text-center">
      <h1 class="sr-only">{t("features.heading")}</h1>
      <p class="gradient-text text-5xl font-extrabold tracking-tight sm:text-6xl" aria-hidden="true">
        {t("features.heading")}
      </p>
      <p class="mx-auto max-w-3xl text-base text-offset sm:text-lg">
        {t("features.description")}
      </p>
    </header>

    <section class="mt-12 space-y-6">
      <h2 class="sr-only">{t("features.highlights.title")}</h2>
      <div class="grid gap-6 md:grid-cols-3">
        {highlights.map(({ title, desc, imageSrc }) => (
          <FeatureStory
            title={title}
            desc={desc}
            imageSrc={imageSrc}
            imageAlt={title}
          />
        ))}
      </div>
    </section>

    <section class="mt-14 grid gap-6 md:grid-cols-2">
      {
        stories.map(({ title, desc, items, imageSrc }, idx) => (
          <FeatureStory
            title={title}
            desc={desc}
            items={items}
            imageSrc={imageSrc}
            imageAlt={title}
          />
        ))
      }
    </section>
  </section>
</BaseLayout>


